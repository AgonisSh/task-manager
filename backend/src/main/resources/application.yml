debug: true

jwt:
  secret: 3z8TnaR1y9vjAPBzU0Fut927bQgoJdaMFnsBcWFV1Ck=
  expiration : 3600000 # 1 hour in milliseconds
  refresh-token:
    expiration: 604800000 # 7 days in milliseconds
    

spring:

    application:
        name: secure-task-manager

    datasource:
        url: jdbc:postgresql://localhost:5432/securetask
        username: postgres
        password: postgres

    jpa:
        hibernate:
            ddl-auto: none # Let Flyway handle schema
        show-sql: true
        open-in-view: false
        properties:
            hibernate:
                format_sql: true
                highlight_sql: true
                use_sql_comments: true  # Shows HQL to SQL translation
    
    server:
        port: 8080

    # Open API configuration
    springdoc:
        api-docs:
            path: /api-docs
        swagger-ui: 
            path: /swagger-ui.html
            operationsSorter: method
            disable-swagger-default-url: false

    flyway:
        enabled: true
        locations: classpath:db/migration
        baseline-on-migrate: true 
        repair-on-migrate: true

# ==========================================
# LOGGING - Maximum visibility
# ==========================================
logging:
  level:
    root: INFO
    com.securetask: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE  # Shows SQL parameters
    org.springframework.boot.autoconfigure: INFO
  
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n%rEx{short}"  # Short stack traces

# ==========================================
# ERROR HANDLING - Detailed responses
# ==========================================
server:
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: on_param  # Add ?trace to URL for stack trace
    include-exception: true
    whitelabel:
      enabled: false  # Use custom error page or JSON
